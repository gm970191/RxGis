<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>è½¦è¾†è¿‡æ»¤åŠŸèƒ½æµ‹è¯•</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      margin: 0;
      padding: 20px;
      background: #f5f5f5;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      overflow: hidden;
    }
    
    .header {
      background: #1890ff;
      color: white;
      padding: 20px;
      text-align: center;
    }
    
    .content {
      padding: 20px;
    }
    
    .test-section {
      margin-bottom: 30px;
      padding: 20px;
      border: 1px solid #e8e8e8;
      border-radius: 6px;
    }
    
    .test-section h3 {
      margin-top: 0;
      color: #1890ff;
    }
    
    .filter-demo {
      display: grid;
      grid-template-columns: 300px 1fr;
      gap: 20px;
      height: 600px;
    }
    
    .filter-panel {
      background: #fafafa;
      padding: 15px;
      border-radius: 6px;
      border: 1px solid #e8e8e8;
    }
    
    .filter-item {
      margin-bottom: 15px;
    }
    
    .filter-item label {
      display: block;
      margin-bottom: 5px;
      font-weight: 500;
      color: #333;
    }
    
    .filter-item input,
    .filter-item select {
      width: 100%;
      padding: 8px;
      border: 1px solid #d9d9d9;
      border-radius: 4px;
      font-size: 14px;
    }
    
    .filter-item input:focus,
    .filter-item select:focus {
      outline: none;
      border-color: #1890ff;
      box-shadow: 0 0 0 2px rgba(24, 144, 255, 0.2);
    }
    
    .filter-actions {
      display: flex;
      gap: 10px;
      margin-top: 15px;
    }
    
    .btn {
      padding: 8px 16px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.2s;
    }
    
    .btn-primary {
      background: #1890ff;
      color: white;
    }
    
    .btn-primary:hover {
      background: #40a9ff;
    }
    
    .btn-default {
      background: #f0f0f0;
      color: #333;
    }
    
    .btn-default:hover {
      background: #e0e0e0;
    }
    
    .vehicle-list {
      background: white;
      border: 1px solid #e8e8e8;
      border-radius: 6px;
      overflow: hidden;
    }
    
    .vehicle-list-header {
      background: #fafafa;
      padding: 12px 15px;
      border-bottom: 1px solid #e8e8e8;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .vehicle-list-content {
      height: 500px;
      overflow-y: auto;
    }
    
    .vehicle-item {
      padding: 12px 15px;
      border-bottom: 1px solid #f0f0f0;
      display: flex;
      align-items: center;
      gap: 15px;
    }
    
    .vehicle-item:hover {
      background: #f5f5f5;
    }
    
    .vehicle-no {
      font-weight: 600;
      color: #333;
      min-width: 100px;
    }
    
    .vehicle-type {
      color: #666;
      min-width: 60px;
    }
    
    .vehicle-group {
      color: #1890ff;
      min-width: 120px;
    }
    
    .vehicle-status {
      padding: 2px 8px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: 500;
    }
    
    .status-online {
      background: #f6ffed;
      color: #52c41a;
      border: 1px solid #b7eb8f;
    }
    
    .status-parking {
      background: #fffbe6;
      color: #faad14;
      border: 1px solid #ffe58f;
    }
    
    .status-offline {
      background: #fff2f0;
      color: #ff4d4f;
      border: 1px solid #ffccc7;
    }
    
    .stats {
      display: flex;
      gap: 20px;
      margin-bottom: 20px;
    }
    
    .stat-item {
      background: #f6ffed;
      padding: 10px 15px;
      border-radius: 6px;
      border: 1px solid #b7eb8f;
    }
    
    .stat-label {
      font-size: 12px;
      color: #666;
      margin-bottom: 5px;
    }
    
    .stat-value {
      font-size: 18px;
      font-weight: 600;
      color: #52c41a;
    }
    
    .no-data {
      text-align: center;
      padding: 40px;
      color: #999;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>ğŸš— è½¦è¾†è¿‡æ»¤åŠŸèƒ½æµ‹è¯•</h1>
      <p>æµ‹è¯•è½¦è¾†åˆ—è¡¨çš„æ£€ç´¢è¿‡æ»¤åŠŸèƒ½ï¼ŒåŒ…æ‹¬è½¦ç‰Œã€ç»ˆç«¯å·ç ã€è½¦è¾†çŠ¶æ€ã€è½¦è¾†ç±»å‹ã€è½¦ç»„å’Œå…¬å¸è¿‡æ»¤</p>
    </div>
    
    <div class="content">
      <!-- ç»Ÿè®¡ä¿¡æ¯ -->
      <div class="test-section">
        <h3>ğŸ“Š è½¦è¾†ç»Ÿè®¡ä¿¡æ¯</h3>
        <div class="stats" id="stats">
          <div class="stat-item">
            <div class="stat-label">æ€»è½¦è¾†æ•°</div>
            <div class="stat-value" id="totalVehicles">0</div>
          </div>
          <div class="stat-item">
            <div class="stat-label">åœ¨çº¿è½¦è¾†</div>
            <div class="stat-value" id="onlineVehicles">0</div>
          </div>
          <div class="stat-item">
            <div class="stat-label">åœè½¦è½¦è¾†</div>
            <div class="stat-value" id="parkingVehicles">0</div>
          </div>
          <div class="stat-item">
            <div class="stat-label">ç¦»çº¿è½¦è¾†</div>
            <div class="stat-value" id="offlineVehicles">0</div>
          </div>
          <div class="stat-item">
            <div class="stat-label">è½¦ç»„æ•°é‡</div>
            <div class="stat-value" id="groupCount">0</div>
          </div>
          <div class="stat-item">
            <div class="stat-label">å…¬å¸æ•°é‡</div>
            <div class="stat-value" id="companyCount">0</div>
          </div>
        </div>
      </div>
      
      <!-- è¿‡æ»¤æ¼”ç¤º -->
      <div class="test-section">
        <h3>ğŸ” è¿‡æ»¤åŠŸèƒ½æ¼”ç¤º</h3>
        <div class="filter-demo">
          <div class="filter-panel">
            <h4>è¿‡æ»¤æ¡ä»¶</h4>
            
            <div class="filter-item">
              <label>è½¦ç‰Œå·</label>
              <input type="text" id="vehicleNoFilter" placeholder="è¾“å…¥è½¦ç‰Œå·">
            </div>
            
            <div class="filter-item">
              <label>ç»ˆç«¯å·ç </label>
              <input type="text" id="terminalIdFilter" placeholder="è¾“å…¥ç»ˆç«¯å·ç ">
            </div>
            
            <div class="filter-item">
              <label>è½¦è¾†çŠ¶æ€</label>
              <select id="statusFilter">
                <option value="">å…¨éƒ¨çŠ¶æ€</option>
                <option value="1">åœ¨çº¿</option>
                <option value="2">åœè½¦</option>
                <option value="0">ç¦»çº¿</option>
              </select>
            </div>
            
            <div class="filter-item">
              <label>è½¦è¾†ç±»å‹</label>
              <select id="vehicleTypeFilter">
                <option value="">å…¨éƒ¨ç±»å‹</option>
                <option value="è´§è½¦">è´§è½¦</option>
                <option value="å®¢è½¦">å®¢è½¦</option>
                <option value="è½¿è½¦">è½¿è½¦</option>
                <option value="é¢åŒ…è½¦">é¢åŒ…è½¦</option>
                <option value="å¢å¼è½¦">å¢å¼è½¦</option>
              </select>
            </div>
            
            <div class="filter-item">
              <label>è½¦ç»„</label>
              <select id="groupIdFilter">
                <option value="">å…¨éƒ¨è½¦ç»„</option>
                <option value="G001">åŒ—äº¬è¿è¾“ä¸€é˜Ÿ</option>
                <option value="G002">åŒ—äº¬å®¢è¿ä¸€é˜Ÿ</option>
                <option value="G003">åŒ—äº¬ç‰©æµä¸€é˜Ÿ</option>
                <option value="G004">åŒ—äº¬å¿«é€’ä¸€é˜Ÿ</option>
                <option value="G005">åŒ—äº¬ç§Ÿèµä¸€é˜Ÿ</option>
              </select>
            </div>
            
            <div class="filter-item">
              <label>å…¬å¸</label>
              <select id="companyFilter">
                <option value="">å…¨éƒ¨å…¬å¸</option>
                <option value="åŒ—äº¬è¿è¾“æœ‰é™å…¬å¸">åŒ—äº¬è¿è¾“æœ‰é™å…¬å¸</option>
                <option value="åŒ—äº¬å®¢è¿é›†å›¢">åŒ—äº¬å®¢è¿é›†å›¢</option>
                <option value="åŒ—äº¬ç‰©æµæœ‰é™å…¬å¸">åŒ—äº¬ç‰©æµæœ‰é™å…¬å¸</option>
                <option value="åŒ—äº¬å¿«é€’æœ‰é™å…¬å¸">åŒ—äº¬å¿«é€’æœ‰é™å…¬å¸</option>
                <option value="åŒ—äº¬æ±½è½¦ç§Ÿèµæœ‰é™å…¬å¸">åŒ—äº¬æ±½è½¦ç§Ÿèµæœ‰é™å…¬å¸</option>
              </select>
            </div>
            
            <div class="filter-actions">
              <button class="btn btn-primary" onclick="applyFilters()">åº”ç”¨è¿‡æ»¤</button>
              <button class="btn btn-default" onclick="resetFilters()">é‡ç½®</button>
            </div>
            
            <div style="margin-top: 15px; font-size: 12px; color: #666;">
              <div>æ˜¾ç¤º: <span id="filteredCount">0</span>/<span id="totalCount">0</span></div>
              <div id="filterActive" style="color: #1890ff; display: none;">ğŸ” å·²åº”ç”¨è¿‡æ»¤æ¡ä»¶</div>
            </div>
          </div>
          
          <div class="vehicle-list">
            <div class="vehicle-list-header">
              <h4>è½¦è¾†åˆ—è¡¨</h4>
              <span id="listCount">0 è¾†è½¦</span>
            </div>
            <div class="vehicle-list-content" id="vehicleList">
              <!-- è½¦è¾†åˆ—è¡¨å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
            </div>
          </div>
        </div>
      </div>
      
      <!-- æµ‹è¯•ç”¨ä¾‹ -->
      <div class="test-section">
        <h3>ğŸ§ª æµ‹è¯•ç”¨ä¾‹</h3>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px;">
          <button class="btn btn-default" onclick="testFilter('vehicleNo', 'äº¬A')">æµ‹è¯•è½¦ç‰Œå·è¿‡æ»¤</button>
          <button class="btn btn-default" onclick="testFilter('terminalId', 'T0')">æµ‹è¯•ç»ˆç«¯å·ç è¿‡æ»¤</button>
          <button class="btn btn-default" onclick="testFilter('status', '1')">æµ‹è¯•åœ¨çº¿çŠ¶æ€è¿‡æ»¤</button>
          <button class="btn btn-default" onclick="testFilter('vehicleType', 'è´§è½¦')">æµ‹è¯•è´§è½¦ç±»å‹è¿‡æ»¤</button>
          <button class="btn btn-default" onclick="testFilter('groupId', 'G001')">æµ‹è¯•è¿è¾“ä¸€é˜Ÿè¿‡æ»¤</button>
          <button class="btn btn-default" onclick="testFilter('company', 'åŒ—äº¬è¿è¾“æœ‰é™å…¬å¸')">æµ‹è¯•å…¬å¸è¿‡æ»¤</button>
          <button class="btn btn-default" onclick="testMultipleFilters()">æµ‹è¯•å¤šæ¡ä»¶è¿‡æ»¤</button>
        </div>
      </div>
    </div>
  </div>

  <script type="module">
    // å¯¼å…¥æ¨¡æ‹Ÿæ•°æ®
    import { allMockVehicles, vehicleGroups } from '../src/utils/mockData.js'
    import { filterVehicles, getFilterStats } from '../src/utils/filterUtils.js'
    
    // å…¨å±€å˜é‡
    let allVehicles = []
    let filteredVehicles = []
    let currentFilters = {
      vehicleNo: '',
      terminalId: '',
      status: '',
      vehicleType: '',
      groupId: '',
      company: ''
    }
    
    // åˆå§‹åŒ–
    function init() {
      allVehicles = allMockVehicles
      filteredVehicles = [...allVehicles]
      
      updateStats()
      renderVehicleList()
      updateFilterStats()
      
      // ç»‘å®šäº‹ä»¶
      document.getElementById('vehicleNoFilter').addEventListener('input', handleFilterChange)
      document.getElementById('terminalIdFilter').addEventListener('input', handleFilterChange)
      document.getElementById('statusFilter').addEventListener('change', handleFilterChange)
      document.getElementById('vehicleTypeFilter').addEventListener('change', handleFilterChange)
      document.getElementById('groupIdFilter').addEventListener('change', handleFilterChange)
      document.getElementById('companyFilter').addEventListener('change', handleFilterChange)
    }
    
    // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
    function updateStats() {
      const stats = {
        total: allVehicles.length,
        online: allVehicles.filter(v => v.status === 1).length,
        parking: allVehicles.filter(v => v.status === 2).length,
        offline: allVehicles.filter(v => v.status === 0).length
      }
      
      const groups = [...new Set(allVehicles.map(v => v.groupId).filter(Boolean))]
      const companies = [...new Set(allVehicles.map(v => v.company).filter(Boolean))]
      
      document.getElementById('totalVehicles').textContent = stats.total
      document.getElementById('onlineVehicles').textContent = stats.online
      document.getElementById('parkingVehicles').textContent = stats.parking
      document.getElementById('offlineVehicles').textContent = stats.offline
      document.getElementById('groupCount').textContent = groups.length
      document.getElementById('companyCount').textContent = companies.length
    }
    
    // å¤„ç†è¿‡æ»¤æ¡ä»¶å˜åŒ–
    function handleFilterChange() {
      currentFilters = {
        vehicleNo: document.getElementById('vehicleNoFilter').value,
        terminalId: document.getElementById('terminalIdFilter').value,
        status: document.getElementById('statusFilter').value,
        vehicleType: document.getElementById('vehicleTypeFilter').value,
        groupId: document.getElementById('groupIdFilter').value,
        company: document.getElementById('companyFilter').value
      }
      
      applyFilters()
    }
    
    // åº”ç”¨è¿‡æ»¤
    function applyFilters() {
      filteredVehicles = filterVehicles(allVehicles, currentFilters)
      renderVehicleList()
      updateFilterStats()
    }
    
    // é‡ç½®è¿‡æ»¤
    function resetFilters() {
      document.getElementById('vehicleNoFilter').value = ''
      document.getElementById('terminalIdFilter').value = ''
      document.getElementById('statusFilter').value = ''
      document.getElementById('vehicleTypeFilter').value = ''
      document.getElementById('groupIdFilter').value = ''
      document.getElementById('companyFilter').value = ''
      
      currentFilters = {
        vehicleNo: '',
        terminalId: '',
        status: '',
        vehicleType: '',
        groupId: '',
        company: ''
      }
      
      applyFilters()
    }
    
    // æ›´æ–°è¿‡æ»¤ç»Ÿè®¡
    function updateFilterStats() {
      const stats = getFilterStats(allVehicles, filteredVehicles)
      document.getElementById('filteredCount').textContent = stats.filtered
      document.getElementById('totalCount').textContent = stats.total
      document.getElementById('listCount').textContent = `${stats.filtered} è¾†è½¦`
      
      const hasActiveFilters = Object.values(currentFilters).some(v => v !== '')
      document.getElementById('filterActive').style.display = hasActiveFilters ? 'block' : 'none'
    }
    
    // æ¸²æŸ“è½¦è¾†åˆ—è¡¨
    function renderVehicleList() {
      const container = document.getElementById('vehicleList')
      
      if (filteredVehicles.length === 0) {
        container.innerHTML = '<div class="no-data">æš‚æ— ç¬¦åˆæ¡ä»¶çš„è½¦è¾†</div>'
        return
      }
      
      const html = filteredVehicles.map(vehicle => {
        const statusClass = vehicle.status === 1 ? 'status-online' : 
                           vehicle.status === 2 ? 'status-parking' : 'status-offline'
        const statusText = vehicle.status === 1 ? 'åœ¨çº¿' : 
                          vehicle.status === 2 ? 'åœè½¦' : 'ç¦»çº¿'
        
        return `
          <div class="vehicle-item">
            <div class="vehicle-no">${vehicle.vehicleNo}</div>
            <div class="vehicle-type">${vehicle.vehicleType}</div>
            <div class="vehicle-group">${vehicle.groupName || '-'}</div>
            <div class="vehicle-status ${statusClass}">${statusText}</div>
          </div>
        `
      }).join('')
      
      container.innerHTML = html
    }
    
    // æµ‹è¯•è¿‡æ»¤åŠŸèƒ½
    window.testFilter = function(type, value) {
      document.getElementById(`${type}Filter`).value = value
      handleFilterChange()
    }
    
    window.testMultipleFilters = function() {
      document.getElementById('vehicleNoFilter').value = 'äº¬A'
      document.getElementById('statusFilter').value = '1'
      document.getElementById('vehicleTypeFilter').value = 'è´§è½¦'
      handleFilterChange()
    }
    
    window.applyFilters = applyFilters
    window.resetFilters = resetFilters
    
    // å¯åŠ¨åº”ç”¨
    init()
  </script>
</body>
</html> 